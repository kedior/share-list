import{r as N}from"./chunk-sn5a9rvh.js";var X=(w)=>{let z=`<script>(${(()=>{let A=location.hash;window.addEventListener("hashchange",()=>{if(location.hash!==A)location.reload()})}).toString()})();</script>`;if(w.includes("</head>"))w=w.replace("</head>",z+`
</head>`);else w+=z;document.open(),document.write(w),document.close()},R=async(w)=>{let q=await new Promise((G,J)=>{let M=new Image;M.crossOrigin="anonymous",M.onload=()=>G(M),M.onerror=J,M.src=w}),z=document.createElement("canvas");z.width=q.width,z.height=q.height;let A=z.getContext("2d");if(!A)throw new Error("无法获取 canvas 2D 渲染上下文。");A.drawImage(q,0,0);let C=A.getImageData(0,0,q.width,q.height).data,O=C.length/4,L=new Uint8Array(O*3);for(let G=0,J=0;G<C.length;G+=4,J+=3)L[J]=C[G],L[J+1]=C[G+1],L[J+2]=C[G+2];let Q=new DataView(L.buffer).getUint32(0,!1);return L.subarray(4,4+Q)},Y=async(w,q)=>{let z=w.endsWith(".png")?w:w+".png";try{let A=await R(z);return await N(A,q)}catch(A){return console.log(A),""}},Z=()=>{let w=new URL(window.location.href),q=new URLSearchParams,z=new URLSearchParams(w.search);for(let[E,C]of z.entries())if(!(E in q))q.set(E,C);let A=new URLSearchParams(w.hash.slice(1));for(let[E,C]of A.entries())q.set(E,C);return q},_=(w)=>{let q=new Map;return(z,...A)=>{if(q.has(z))return q.get(z);let E=w(...A);return q.set(z,E),E}};
export{X as b,Y as c,Z as d,_ as e};
